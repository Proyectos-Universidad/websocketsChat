<div class="row">
    <div class="col-sm-offset-4 col-sm-4">
        <form [formGroup]="registerForm" (ngSubmit)="submitHandler()" class="register-form">
            <mat-form-field class="register-form__form-field">
              <input #shit matInput type="text" formControlName="username" placeholder="Enter your username">
              <mat-error *ngIf="submitted && f.username.errors">Username is required</mat-error>
              <mat-error *ngIf="f.username.invalid && f.username.dirty">Username is already taken</mat-error>
              <mat-error *ngIf="f.username.pending">Checking if username is available...</mat-error>
            </mat-form-field>
              <mat-form-field class="register-form__form-field">
                <input matInput type="text"  formControlName="firstName" placeholder="Enter your first name">
                <mat-error *ngIf="submitted && f.firstName.errors">First name is required</mat-error>
              </mat-form-field>
              <mat-form-field class="register-form__form-field">
                  <input matInput type="text"  formControlName="lastName" placeholder="Enter your last name">
                  <mat-error *ngIf="submitted && f.lastName.errors">Last name is required</mat-error>
              </mat-form-field>
              <mat-form-field class="register-form__form-field">
                <input matInput type="password"  formControlName="password" placeholder="Enter your password">
                <mat-error *ngIf="submitted && f.password.errors">Password is required</mat-error>
              </mat-form-field>
              <mat-form-field class="register-form__form-field">
                  <input matInput type="password"  formControlName="passwordConfirmation" placeholder="Enter your password again">
                  <mat-error *ngIf="submitted && f.passwordConfirmation.errors">Password confirmation is required</mat-error>
                  <mat-error *ngIf="f.passwordConfirmation.errors && f.passwordConfirmation.errors.mustMatch">Passwords do not match</mat-error>
              </mat-form-field>
            <div>
                <button type="submit" [disabled]="loading || registerForm.invalid" mat-raised-button color="primary">Register</button>
                <!-- TODO Change inlined image to something else-->
                <img *ngIf="loading" class="pl-2" src="data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA==" />
                <mat-error *ngIf="error">{{error}}</mat-error>
            </div>
        </form>
    </div>
</div>